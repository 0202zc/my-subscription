# my-subscription
邮件订阅软件，用户提交需要订阅的内容和时间（可自行定义服务），服务器调度爬虫进行推送。
后端基于 SpringBoot + MyBatis，使用 Redis 来缓存数据，前端使用 Ace Admin 作为模板，利用Python编写爬虫程序。采用Nginx搭建服务器，托管前端代码。

## 面向人群
- 不能及时或不想自己手动获取信息
- 网络上信息获取需求不能满足（例如没有现成的需求信息的推送服务）

## 前端页面功能介绍

### Forms > 服务订阅：
- 用户添加订阅（选择服务、推送时间），可选择系统自带服务，也可自定义服务（暂未实现不同服务选择各自的推送时间）；
- 已经添加过订阅服务的用户，输入信息时会自动填充以往提交的内容，方便取消订阅；
- 该页面的“接收订阅”一栏中，可切换推送状态（打开/关闭）。另外，在选择推送时间“第二步 Alert”里面，也可以关闭推送服务。

### Forms > 文件上传：
- 用户自定义服务功能。用户上传.py的爬虫文件，且一个爬虫文件只能对应一个服务；若有多个爬虫相关联，则选择其中一个文件用于返回格式化后的内容，格式如下：
     ```python
     def process():
        content = "(返回的内容)"  # 此为发送到邮件的内容，推荐使用html格式
        ...
        return str(content) # 将其转化为字符串并返回给调度文件customize.py
     ```
     由于邮件内容采用html格式，因此，内容推荐使用html构造，以方便接收者查看。最后转为字符串返回。
- 首先上传.py的爬虫文件（不能与服务器已有文件重名），上传成功后选择**一个**对应的.py文件，然后输入自定义服务信息进行提交。
- 添加成功后可选择是否继续添加服务：
  - 若是，则留在本页继续添加，注意不要刷新页面，因为后文件的显示会丢失；
  - 否则，回到服务订阅页面进行订阅。

### 数据管理 > 服务管理：
- 查看服务信息：编号、名称、订阅量、类型、爬虫文件、发布者、备注、创建时间和状态等
- 修改状态：启用/禁用
- 删除服务（暂未实现修改服务信息）
- 导出服务列表到.CSV文件
- 打印服务列表

### 数据管理 > 用户管理：
- 查看用户信息： 编号、用户名、邮箱、权限、用户类型和注册时间等
- 修改用户：使用ajax动态修改数据并显示，可修改的内容仅有用户名、邮箱、权限和用户类型
- 删除用户：每一行的“操作”为单独修改方式，表格下方的删除和编辑为批量修改方式
- 添加用户：左下方的“加号”按钮，仅能添加邮箱、权限和用户类型，用户名需要点击编辑才能修改(bug)

# Installation
## Requirement
- `Java 1.8`、`MySQL 5.7`、`Nginx latest stable version`、`Python 3.6`、`Redis latest stable version`

## Step
1. git项目 `my-subscription` 到本地
2. 新建数据库 `db_mail_send`，导入/config/database中的.sql文件
